---
title: "EES 3310/5310 Lab #1"
subtitle: "Exercises from Chapters 2 and 3"
author: "put your name here"
date: "August 28, 2017"
output:
  html_document: default
  pdf_document: default
  github_document: default
---

```{r setup, include=FALSE}
# This section sets up some options on knitr for processing the RMarkdown file
knitr::knit_hooks$set(inline = function(x) { knitr:::format_sci(x, 'md')})
knitr::opts_chunk$set(echo = TRUE)
```
```{r initialize, include=FALSE}
# This section loads necessary R libraries and sources scripts that define 
# useful functions format_md and make_layer_diagram.
# 
library(tidyverse)
library(stringr)

source("scripts/format_md.R")
source("scripts/layer_diagram.R")
```

# Exercises from Chapter 2

## Exercise 2.1

Consider exercise 1 in Chapter 2, on p. 17 of our textbook, 
_Global Warming: Understanding the Forecast_:

> A joule (J) is an amount of energy, and a watt (W) is a rate of using energy, 
> defined as 1 W = 1 J/s. How many Joules of energy are required to run a 100-W 
> light bulb for one day?

```{r ex_2_1_a}
seconds_per_hour = 60 * 60 # number of seconds in one hour
hours_per_day = 24 # number of seconds in one day
light_bulb_power = 100
joules_per_day = light_bulb_power * seconds_per_hour * hours_per_day

joules_per_day
```

It can be hard to read a long number like that, so we can use R's format command to add commas:

```{r formatting_example}
format_md(joules_per_day, comma = TRUE)
```

**Answer:** A `r light_bulb_power` watt light bulb burns `r light_bulb_power` Joules per second, 
so the light bulb burns `r light_bulb_power * seconds_per_hour` Joules per hour and
`r joules_per_day` Joules per day.

> Burning coal yields about 30 &times; 10^6^ J of energy per kilogram of coal burned. 
> Assuming that the coal power plant is 30% efficient,
> how much coal has to be burned to light that light bulb for one day?

```{r ex_2_1_b}
joules_heat_per_kg_coal = 30.E+6
efficiency = 0.30
joules_electricity_per_kg_coal = joules_heat_per_kg_coal * efficiency
kg_coal_per_joule_electricity = 1 / joules_electricity_per_kg_coal
kg_coal_per_day = joules_per_day * kg_coal_per_joule_electricity

kg_coal_per_day
```

**Answer:** 1 kilogram of coal produces `r format_md(joules_heat_per_kg_coal, digits = 1)` joules of heat, which is converted into `r format_md(joules_electricity_per_kg_coal, digits = 1)` joules of electricity.
We can turn this around and figure that to get 1 joule of electricity takes 1 / (`r format_md(joules_electricity_per_kg_coal, digits = 1)`) = `r format_md(kg_coal_per_joule_electricity, digits = 1)` kg of coal,
so to get `r format_md(joules_per_day, digits = 1)` joules of electricity to power the light bulb for one day takes `r format_md(kg_coal_per_day, digits = 2)` kg of coal.

## Exercise 2.2

> A gallon of gasoline carries with it about 1.3 &times; 10^8^ J of energy. 
> Given a price of $3 per callon, how many Joules can you get for a dollar?

```{r ex_2_2_a}
# Put your R code here to answer the question
```

**Answer:** You can get ... Joules per dollar from gasoline.

> Electricity goes for about $0.05 per kilowatt hour. A kilowatt hour is just a 
> weird way to write Joules because a watt is a joule per second, and a kilowatt 
> hour is the number of Joules one would get from running 1000 W time one hour
> (3,600 seconds). In the form of electricity, how many Joules can you get for a 
> dollar?

```{r ex_2_2_b}
# Put your R code here to answer the question
```

**Answer:** put your answer here ...

> A standard cubic foot of natural gas carries with it about 1.1 &times; 10^6^ Joules
> of energy. You can get about 5 &times; 10^5^ British Thermal Units (BTUs) of gas
> for a dollar, and there are about 1,030 BTUs in a standard cubic foot. 
> How many Joules of energy in the form of natural gas can you get for a dollar?

```{r ex_2_2_c}
# Put your R code here to answer the question
```

**Answer:** put your answer here ...

> A ton of coal holds about 3.2 &times; 10^10^ J of energy and costs about $40.
> How many Joules of energy in the form of coal can you get for a dollar?

```{r ex_2_2_d}
# Put your R code here to answer the question
```

**Answer:** put your answer here ...

> Corn oil costs about $0.10 per fluid ounce wholesale. A fluid ounce carries
> about 240 dietary Calories (which a scientist would call kilocalories).
> A dietary Calorie is about 4200 J. How many Joules of energy in the form of
> corn oil can you get for a dollar?

```{r ex_2_2_e}
# Put your R code here to answer the question
```

**Answer:** put your answer here ...

> Rank these five energy sources from cheap to expensive. 
> What is the range of prices?

**Answer:** put your answer here ...


## Exercise 2.3 (Grad students only)

> This is one of those job-interview questions to see how creative you are, 
> analogous to one I heard: "How many airplanes are over Chicago at any given time?" 
> You need to make stuff up to get an estimate and demonstrate your management 
> potential. 
> The question is: _What is the efficiency of energy production from growing corn?_
> 
> Assume that sunlight deposits 250 W/m^2^ of energy on a corn field, averaging 
> over the day-night cycle. 
> There are approximately 4,200 J per dietary Calorie. 
> How many Calories of energy are deposited on a square
> meter of field over the growing season? 
>
> (Note: the word "calorie" has two different meanings. Physicists and chemists, 
> use "calorie" (with a lower-case "c") to refer to a thermodynamic unit of heat, 
> but nutritionists use the word Calorie (with a capital 'C')
> to mean 1 kilocalorie (1000 thermodynamic calories), so when you see "Calories" 
> on a food label, it means kilocalories. To keep this exercise simple, I have 
> edited the textbook version so we only need to think in terms of dietary Calories.)


```{r ex_2_3_a}
# Put your R code here to answer the question
```

**Answer:** put your answer here ...

> Now guess how many ears of corn grow per square
> meter, and guess what the number of dietary Calories is that you get for eating 
> an ear of corn. Compare the sunlight energy with the corn energy to get the 
> efficiency.

**Answer:** put your answer here ...

## Exercise 2.4

> The Hoover Dam produces $2 \times 10^{9}$ W of electricity. It is composed of 
> $7 \times 10^{9}$ kg of concrete.
> Concrete requires 1 MJ of energy (1 megajoule, 1,000,000 Joules) to produce 
> per kilogram. 
> How much energy did it take to produce the dam? How long is the "energy payback 
> time" for the dam?

```{r ex_2_4_a}
# Put your R code here to answer the question
```

**Answer:** put your answer here ...

> The area of Lake Mead, formed by Hoover Dam, is 247 mi^2^. Assuming 250 W/m^2^ 
> of sunlight falls on Lake Mead, how much energy could you produce if instead of 
> the lake you installed solar cells that were 12% efficient? 
> (1 mile is 1609 meters; how many square meters are in a square mile?)

```{r ex_2_4_b}
# Put your R code here to answer the question
```

**Answer:** put your answer here ...

## Exercise 2.5

> It takes approximately $2 \times 10^{9}$ J of energy to manufacture 1 m^2^ of 
> crystalline-silicon photovoltaic cell. (Actually, the number quoted was 
> 600 kilowatt hours. Can you figure out how to convert kilowatt hours into 
> Joules?) Assume that the solar cell is 12% efficient, and calculate how long it
> would take, given 250 W/m^2^ of sunlight, for the solar cell to repay the energy 
> it cost for its manufacture.

```{r ex_2_5}
# Put your R code here to answer the question
```

**Answer:** put your answer here ...

## Exercise 2.7

> Infrared light has a wavelength of about 10 $\mu$m. What is its wave number in
> cm^−1^?

```{r ex_2_7_a}
# Put your R code here to answer the question
```

**Answer:** put your answer here ...

> Visible light has a wavelength of about 0.5 $\mu$m. What is its frequency in 
> Hz (cycles per second)?

```{r ex_2_7_b}
# Put your R code here to answer the question
```

**Answer:** put your answer here ...

> FM radio operates at a frequency of about 40 kHz. What is its wavelength?

```{r ex_2_7_c}
# Put your R code here to answer the question
```

**Answer:** put your answer here ...


# Exercises from Chapter 3

For the following exercises, use the following numbers:

* I~solar~ = 1350 W/m^2^
* $\sigma = 5.67 \times 10^{-8}$
* $\alpha = 0.30$
* $\varepsilon = 1.0$

```{r layer_model_constants}
I_solar = 1350
alpha = 0.30
sigma = 5.67E-8
epsilon = 1
```

## Worked Example for One-Layer Atmosphere

> **A One-Layer Model.** 

```{r one_layer_figure, fig.cap = "An energy diagram for a planet with one pane of glass for an atmosphere. The intensity of heat from visible light is $(1 - \\alpha) I_{solar} / 4$."}
make_layer_diagram(1)
```

> a) Write the energy budgets for the atmospheric layer, for the ground, and for
> the Earth as a whole.

**Answer:** Start at the top, at the boundary to sapce, and work downward:

* At the boundary to space, $I_{1,up} = (1 - \alpha) I_{solar} / 4$.

* At the atmospheric layer, $I_{1,up} + I_{1,down} = I_{ground,up}$

* At the ground, $(1 - \alpha) I_{solar} + I_{1,down} = I_{ground,up}$

We also know that

* $I_{1,up} = I_{1,down} = \varepsilon \sigma T_{1}^4$

* $I_{ground,up} = \sigma T_{ground}^4$


> b) Manipulate the budget for the Earth as a whole to obtain the temperature 
> T~1~ of the atmospheric layer. Does this part of the exercise seem familiar in 
> any way? Does the term ring any bells?

**Answer:** 

$$(1 - \alpha) I_{solar} / 4 = I_{1,up} = \sigma T_{1}^4$$

$$(1 - \alpha) I_{solar} / 4 \varepsilon \sigma = T_{1}^4$$

$$T_{1} = \sqrt[4]{\frac{(1 - \alpha) I_{solar}}{4 \varepsilon \sigma}}$$

This is familiar, because it's the same as the formula for the bare-rock temperature.

```{r layer_1_temperature}
I_1_up = (1 - alpha) * I_solar / 4
T_1 = (I_1_up / (epsilon * sigma))^0.25
```

From the algebraic solution, we expect T~1~ to be `r format_md(((1 - alpha) * I_solar / (4 * epsilon * sigma))^0.25, digits = 3)` K.
From the R code above, we get T~1~ = `r format_md(T_1, digits = 3)` K.

> c) Now insert the value you found for T~1~ into the budget for atmospheric 
> layer 1 to obtain the temperature of the ground, T~ground~.

**Answer:** 

* $I_{ground} = I_{1,up} + I_{1,down} = 2 \times I_{1,up}$
* $\varepsilon \sigma T_{ground}^4 = 2 \varepsilon \sigma T_{1}^4$
* $T_{ground}^4 = 2 T_{1}^4$
* $T_{ground} = \sqrt[4]{2} \times T_{1}$

```{r ground_temperature}
I_1_down = I_1_up
I_ground = I_1_up + I_1_down
T_ground = (I_ground / (epsilon * sigma))^0.25
```

From the algebraic solution, we get T~ground~ = `r format_md(2^0.25 * T_1, digits = 3)` K and from the R code above, we get T~ground~ = `r format_md(T_ground, digits = 3)` K.


## Exercise 3.1 (Grad. students only)

> **The moon with no heat transport.** The Layer Model assumes that the 
> temperature of the body in space is all the same. This is not really very 
> accurate, as you know that it is colder at the poles than it is at the equator. 
> For a bare rock with no atmosphere or ocean, like the moon, the situation is 
> even worse because fluids like air and water are how heat is carried around on
> the planet. So let us make the other extreme assumption, that there is no heat 
> transport on a bare rock like the moon. Assume for comparability that the 
> albedo of this world is 0.30, same as Earth’s. 
>
> What is the equilibrium temperature of the surface of the moon, on the equator, 
> at local noon, when the sun is directly overhead? (Hint: First figure out the 
> intensity of the local solar radiation I~solar~)

```{r ex_3_1_a}
# Put your R code here to answer the question
```

**Answer:** put your answer here ...

> What is the equilibrium temperature on the dark side of the moon?

```{r ex_3_1_b}
# Put your R code here to answer the question
```

**Answer:** put your answer here ...

## Exercise 3.2

> **A Two-Layer Model.** Insert another atmospheric layer into the model, just 
> like the first one. The layer is transparent to visible light but a blackbody 
> for infrared.

```{r two_layer_figure, fig.cap = "An energy diagram for a planet with two panes of glass for an atmosphere. The intensity of absorbed visible light is $(1 - \\alpha) I_{solar} / 4$."}
make_layer_diagram(2)
```

> a) Write the energy budgets for both atmospheric layers, for the ground, and 
> for the Earth as a whole, like we did for the One-Layer Model.

**Answer:** put your energy budgets here...

> b) Manipulate the budget for the Earth as a whole to obtain the temperature 
> T~2~ of the top atmospheric layer, labeled Atmospheric Layer 2 in the figure 
> above. Does this part of the exercise seem familiar in any way? Does the term 
> ring any bells?

```{r ex_3_2_b}
# Put your R code here to answer the question
```

**Answer:** put the temperature T~2~ here...

> c) Insert the value you found for T~2~ into the energy budget for layer 2, and 
> solve for the temperature of layer 1 in terms of layer 2. How much bigger is 
> T~1~ than T~2~?

```{r ex_3_2_c}
# Put your R code here to answer the question
```

**Answer:** put the temperature T~1~ here....

> d) Now insert the value you found for T~1~ into the budget for atmospheric 
> layer 1 to obtain the temperature of the ground, T~ground~. Is the greenhouse 
> effect stronger or weaker because of the second layer?

```{r ex_3_2_d}
# Put your R code here to answer the question
```

**Answer:** put your answer here...

## Exercise 3.3

```{r nuclear_winter_diagram, fig.cap="An energy diagram for a planet with an opaque pane of glass for an atmosphere. The intensity of absorbed visible light is $(1 - \\alpha) I_{solar} / 4$."}
make_nuclear_winter_diagram()
```

> **Nuclear Winter.** Let us go back to the One-Layer Model but change it so 
> that the atmospheric layer absorbs visible light rather than allowing it to 
> pass through (See the figure above). This could happen if the upper atmosphere 
> were filled with dust. For simplicity, assume that the albedo of the Earth 
> remains the same, even though in the real world it might change with a dusty 
> atmosphere.>  What is the temperature of the ground in this case?

```{r ex_3_3}
# Put your R code here to answer this question.
```

**Answer:** put your answer here ...
